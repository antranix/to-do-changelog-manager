(()=>{"use strict";var e={215(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.scanTodosInWorkspace=async function(){const e=[],t=new Set,n=await a.workspace.findFiles("**/*.{js,ts,jsx,tsx,py,java,go,cpp,c,h}","**/node_modules/**");for(const r of n){const n=await a.workspace.openTextDocument(r),o=a.workspace.getWorkspaceFolder(r),i=o?.uri.fsPath;for(let o=0;o<n.lineCount;o++){const s=n.lineAt(o).text;if(!u.test(s))continue;const a=s.match(/(?:TODO:?|TO-DO:?)(.*)/i),l=a?a[1].trim():"",f=i?c.relative(i,r.fsPath):r.fsPath,h=(0,d.makeScannedTodo)(l,f,o);t.has(h.id)||(t.add(h.id),e.push(h))}}return e};const a=s(n(398)),c=s(n(928)),d=n(942),u=/(\/\/\s*TO-?DO)/i},322(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.readChangelog=async function(){const e=d();if(!e)return[];try{const t=await a.workspace.fs.readFile(e);return function(e){const t=e.split(/\r?\n/),n=[];let r=null,o=null;for(const e of t){const t=e.trim();if(!t)continue;const i=p(t);if(i){r={version:i.version,date:i.date,sections:f()},o=null,n.push(r);continue}if(!r)continue;const s=h(t);if(s)r.sections[s]||(r.sections[s]=[]),o=s;else if(o&&t.startsWith("- ")){const e=g(t);if(!e)continue;r.sections[o].push({text:e})}}return n}(u.decode(t))}catch{return[]}},t.writeChangelog=async function(e){const t=d();if(!t)return;const n=function(e){const t=[],n=["Additions","Changes","Deprecations","Fixes","Removals","Security Changes"],r=[...e].sort((e,t)=>{const n=t.date.localeCompare(e.date);return 0!==n?n:String(t.version).localeCompare(String(e.version),void 0,{numeric:!0})});for(const e of r){const r=n.filter(t=>(e.sections?.[t]?.length??0)>0);t.push(`## ${e.version} ${e.date}`);for(const n of r){t.push(""),t.push(`### ${n}`);const r=e.sections[n];for(const e of r)t.push(`- ${e.text}`)}t.push("")}return t.join("\n")}(e);await a.workspace.fs.writeFile(t,l.encode(n));const r=t.path.split("/").pop()??"";await async function(e){const t=a.workspace.workspaceFolders;if(!t||0===t.length)return;const n=t[0].uri,r=a.Uri.joinPath(n,".gitignore");let o="";try{const e=await a.workspace.fs.readFile(r);o=Buffer.from(e).toString("utf8")}catch{}if(o.split(/\r?\n/).includes(e))return;const i=o+(o.length>0?"\n":"")+e+"\n";await a.workspace.fs.writeFile(r,Buffer.from(i,"utf8"))}(r)};const a=s(n(398)),c=["Additions","Changes","Deprecations","Fixes","Removals","Security Changes"];function d(){const e=a.workspace.workspaceFolders;return e&&0!==e.length?a.Uri.joinPath(e[0].uri,"CHANGELOG.md"):(a.window.showWarningMessage("Open a folder to use the changelog."),null)}const u=new TextDecoder("utf-8"),l=new TextEncoder;function f(){const e={};for(const t of c)e[t]=[];return e}function h(e){const t=e.match(/^###\s+(.+)\s*$/);return t?t[1].trim():null}function p(e){const t=e.match(/^##\s+(?:\[(.+?)\]|(\S+))\s*(?:-\s*)?(\d{4}-\d{2}-\d{2})\s*$/);if(!t)return null;const n=(t[1]??t[2])?.trim(),r=t[3]?.trim();return n&&r?{version:n,date:r}:null}function g(e){const t=e.match(/^- (?:\[[^\]]+\]\s*)?(.+)\s*$/);return t?t[1].trim():null}},398(e){e.exports=require("vscode")},560(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ChangelogProvider=void 0;const a=s(n(398)),c=n(322),d=[{key:"Additions",label:"ðŸ†• Additions"},{key:"Changes",label:"ðŸ”ƒ Changes"},{key:"Deprecations",label:"â¬‡ï¸ Deprecations"},{key:"Fixes",label:"ðŸ†— Fixes"},{key:"Removals",label:"ðŸ—‘ï¸ Removals"},{key:"Security Changes",label:"ðŸ›¡ï¸ Security Changes"}];t.ChangelogProvider=class{_onDidChange=new a.EventEmitter;onDidChangeTreeData=this._onDidChange.event;versions=[];constructor(){this.load()}async load(){const e=await(0,c.readChangelog)();this.versions=e.map(e=>({kind:"version",version:e.version,date:e.date,sections:e.sections})),this._onDidChange.fire()}refresh(){this.load()}getTreeItem(e){if("version"===e.kind){const t=`${e.version}   ${e.date}`,n=new a.TreeItem(t,a.TreeItemCollapsibleState.Collapsed);return n.contextValue="changelogVersion",n}if("section"===e.kind){const t=new a.TreeItem(`${e.label} (${e.count})`,a.TreeItemCollapsibleState.Collapsed);return t.contextValue="changelogSection",t}const t=new a.TreeItem(`ðŸ”¸ ${e.text}`,a.TreeItemCollapsibleState.None);return t.contextValue="changelogEntry",t}getChildren(e){if(!e)return Promise.resolve([...this.versions].sort((e,t)=>t.date.localeCompare(e.date)));if("version"===e.kind)return Promise.resolve(d.map(({key:t,label:n})=>({kind:"section",key:t,label:n,count:e.sections[t]?.length??0,version:e})));if("section"===e.kind){const t=e.version,n=t.sections[e.key]??[];return Promise.resolve(n.map(n=>({kind:"entry",text:n.text,version:t,section:e.key})))}return Promise.resolve([])}}},733(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerTodo=function(e){const t=new c.TodoProvider;a.window.registerTreeDataProvider("todoView",t),e.subscriptions.push(a.commands.registerCommand("todo.add",async()=>{const e=await a.window.showInputBox({prompt:"Add a new task"});e&&await t.add(e.trim())}),a.commands.registerCommand("todo.complete",e=>e&&t.complete(e)),a.commands.registerCommand("todo.uncomplete",e=>e&&t.uncomplete(e)),a.commands.registerCommand("todo.refresh",()=>{t.refresh()}),a.commands.registerCommand("todo.edit",async e=>{if(!e)return;const n=await a.window.showInputBox({prompt:"Edit task",value:e.text});n&&await t.edit(e,n.trim())}),a.commands.registerCommand("todo.remove",async e=>{e&&await t.remove(e)}),a.commands.registerCommand("todo.scanFiles",async()=>{try{const e=await(0,u.scanTodosInWorkspace)();if(0===e.length)return void a.window.showInformationMessage("No TODOs found in project files.");const n=[...await(0,d.readTodos)(),...e];await(0,d.writeTodos)(n),t.refresh(),a.window.showInformationMessage(`Added ${e.length} TODOs found in project files.`)}catch(e){console.error("Error scanning TODOs:",e),a.window.showErrorMessage("Failed to scan TODOs in project files.")}}))};const a=s(n(398)),c=n(860),d=n(942),u=n(215)},860(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.TodoProvider=void 0;const a=s(n(398)),c=n(942);t.TodoProvider=class{_onDidChange=new a.EventEmitter;onDidChangeTreeData=this._onDidChange.event;items=[];constructor(){this.load()}async load(){const e=await(0,c.readTodos)();this.items=[...e.filter(e=>!e.completed),...e.filter(e=>e.completed)],this._onDidChange.fire()}refresh(){this.load()}getTreeItem(e){const t=`${e.text}`,n=new a.TreeItem(t);if(e.relativePath&&"number"==typeof e.line){const t=a.workspace.workspaceFolders?.[0];if(t){const r=a.Uri.joinPath(t.uri,e.relativePath);n.command={command:"vscode.open",title:"Open",arguments:[r,{selection:new a.Range(e.line,0,e.line,0)}]},n.description=`${e.relativePath}:${e.line+1}`}}return n.contextValue=e.completed?"done":"pending",n}getChildren(){return Promise.resolve(this.items)}async add(e){const t=await(0,c.readTodos)();t.push((0,c.makeTodo)(e)),await(0,c.writeTodos)(t),this.refresh()}async addScanned(e){if(0===e.length)return;const t=await(0,c.readTodos)(),n=new Map;for(const e of t)n.set(e.id,e);for(const t of e)n.has(t.id)||n.set(t.id,t);await(0,c.writeTodos)([...n.values()]),this.refresh()}async edit(e,t){const n=await(0,c.readTodos)(),r=n.find(t=>t.id===e.id);r&&(r.text=t,await(0,c.writeTodos)(n),this.refresh())}async uncomplete(e){if(!e)return;const t=await(0,c.readTodos)(),n=t.find(t=>t.id===e.id);n&&(n.completed=!1,n.date_finished=null,await(0,c.writeTodos)(t),this.refresh())}async complete(e){const t=await(0,c.readTodos)(),n=t.find(t=>t.id===e.id);n&&(n.completed=!0,n.date_finished=(new Date).toISOString(),await(0,c.writeTodos)(t),this.refresh())}async remove(e){await(0,c.writeTodos)((await(0,c.readTodos)()).filter(t=>t.id!==e.id)),this.refresh()}}},905(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.registerChangelog=function(e){const t=new c.ChangelogProvider,n=a.window.registerTreeDataProvider("changelogView",t);e.subscriptions.push(n),e.subscriptions.push(a.commands.registerCommand("changelog.refresh",()=>{t.refresh()})),e.subscriptions.push(a.commands.registerCommand("changelog.addVersion",async()=>{const e=await a.window.showInputBox({prompt:"New version (e.g., 1.0.0)"});if(!e)return;const n=(new Date).toISOString().split("T")[0],r=await(0,d.readChangelog)();r.some(t=>t.version===e)?a.window.showWarningMessage(`Version "${e}" already exists!`):(r.unshift({version:e,date:n,sections:{Additions:[],Changes:[],Deprecations:[],Fixes:[],Removals:[],"Security Changes":[]}}),await(0,d.writeChangelog)(r),t.refresh())})),e.subscriptions.push(a.commands.registerCommand("changelog.addEntry",async e=>{const n=e.version,r=e.key??e.name,o=e.label??e.name??r,i=await a.window.showInputBox({prompt:`Add entry to ${o}`,placeHolder:"Describe the change..."});if(!i)return;const s=await(0,d.readChangelog)(),c=s.findIndex(e=>e.version===n.version);-1!==c&&(s[c].sections[r]||(s[c].sections[r]=[]),s[c].sections[r].push({text:i}),await(0,d.writeChangelog)(s),t.refresh())})),e.subscriptions.push(a.commands.registerCommand("changelog.editEntry",async e=>{const n=await a.window.showInputBox({prompt:"Edit entry text",value:e.text});if(!n)return;const r=await(0,d.readChangelog)(),o=r.findIndex(t=>t.version===e.version.version);if(-1===o)return;const i=r[o].sections[e.section]??[];r[o].sections[e.section]=i;const s=i.findIndex(t=>t.text===e.text);-1!==s&&(i[s].text=n,await(0,d.writeChangelog)(r),t.refresh())})),e.subscriptions.push(a.commands.registerCommand("changelog.removeEntry",async e=>{if("Yes"!==await a.window.showWarningMessage(`Remove this entry?\n"${e.text}"`,{modal:!0},"Yes"))return;const n=await(0,d.readChangelog)(),r=n.findIndex(t=>t.version===e.version.version);if(-1===r)return;const o=n[r].sections[e.section]??[];n[r].sections[e.section]=o.filter(t=>t.text!==e.text),await(0,d.writeChangelog)(n),t.refresh()})),e.subscriptions.push(a.commands.registerCommand("changelog.removeVersion",async e=>{if("Yes"!==await a.window.showWarningMessage(`Remove version "${e.version}" and all its entries?`,{modal:!0},"Yes"))return;const n=(await(0,d.readChangelog)()).filter(t=>t.version!==e.version);await(0,d.writeChangelog)(n),t.refresh()}))};const a=s(n(398)),c=n(560),d=n(322)},928(e){e.exports=require("path")},942(e,t,n){var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),s=0;s<n.length;s++)"default"!==n[s]&&o(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.makeTodo=function(e){return{id:c.randomUUID(),text:e,completed:!1,date_added:(new Date).toISOString(),date_finished:null}},t.makeScannedTodo=function(e,t,n){const r=e.trim()||"TODO",o=function(e,t,n){const r=n.trim().slice(0,32);return`${l(e)}:${t}:${r}`}(t,n,r);return{id:(i=o,c.createHash("sha256").update(i).digest("hex").slice(0,16)),text:r,completed:!1,date_added:(new Date).toISOString(),date_finished:null,relativePath:l(t),line:n,sourceKey:o};var i},t.readTodos=async function(){const e=u();if(!e)return[];try{const t=await a.workspace.fs.readFile(e);return function(e){const t=[];for(const n of e.split(/\r?\n/)){const e=n.match(/^- \[( |x)\] (.+?)(?: <!-- (.+) -->)?$/);if(!e)continue;const r="x"===e[1],o=e[2],i=e[3];if(i)try{const e=JSON.parse(i);t.push({id:e.id,text:o,completed:r,date_added:e.date_added,date_finished:e.date_finished??null,relativePath:e.relativePath,line:e.line,sourceKey:e.sourceKey})}catch{}}return t}(Buffer.from(t).toString("utf8"))}catch{return[]}},t.writeTodos=async function(e){const t=u();if(!t)return;const n=new Map;for(const t of e)n.has(t.id)||n.set(t.id,t);const r=function(e){const t=["# TO-DO",""];for(const n of e){const e={id:n.id,date_added:n.date_added,date_finished:n.date_finished??null,relativePath:n.relativePath,line:n.line,sourceKey:n.sourceKey};t.push(`- [${n.completed?"x":" "}] ${n.text} \x3c!-- ${JSON.stringify(e)} --\x3e`)}return t.push(""),t.join("\n")}([...n.values()]);await a.workspace.fs.writeFile(t,Buffer.from(r,"utf8")),await async function(e){const t=a.workspace.workspaceFolders;if(!t||0===t.length)return;const n=a.Uri.joinPath(t[0].uri,".gitignore");let r="";try{r=Buffer.from(await a.workspace.fs.readFile(n)).toString("utf8")}catch{}r.split(/\r?\n/).includes(e)||await a.workspace.fs.writeFile(n,Buffer.from(r+"\n"+e+"\n","utf8"))}(d)};const a=s(n(398)),c=s(n(982)),d="TO-DO.md";function u(){const e=a.workspace.workspaceFolders;return e&&0!==e.length?a.Uri.joinPath(e[0].uri,d):(a.window.showWarningMessage("Open a folder first to save TO-DOs."),null)}function l(e){return e.replace(/\\/g,"/")}},982(e){e.exports=require("crypto")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(e){(0,t.registerTodo)(e),(0,o.registerChangelog)(e)},e.deactivate=function(){};const t=n(733),o=n(905)})(),module.exports=r})();